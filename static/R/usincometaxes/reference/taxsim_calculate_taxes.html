<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="This function calculates state and federal income taxes using the TAXSIM 32 tax simulator.
See https://users.nber.org/~taxsim/taxsim32/ for more information on TAXSIM 32."><title>Calculate state and federal taxes using TAXSIM 32. — taxsim_calculate_taxes • usincometaxes</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.0.2/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.0.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Calculate state and federal taxes using TAXSIM 32. — taxsim_calculate_taxes"><meta property="og:description" content="This function calculates state and federal income taxes using the TAXSIM 32 tax simulator.
See https://users.nber.org/~taxsim/taxsim32/ for more information on TAXSIM 32."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">usincometaxes</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.1</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-2">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/using-usincometaxes.html">Calculating Federal and State Income Taxes</a>
    <a class="dropdown-item" href="../articles/taxsim-input.html">Description of Input Columns</a>
    <a class="dropdown-item" href="../articles/taxsim-output.html">Description of Output Columns</a>
  </div>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/shanejorr/usincometaxes/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Calculate state and federal taxes using TAXSIM 32.</h1>
      <small class="dont-index">Source: <a href="https://github.com/shanejorr/usincometaxes/blob/HEAD/R/calculate_taxes.R" class="external-link"><code>R/calculate_taxes.R</code></a></small>
      <div class="d-none name"><code>taxsim_calculate_taxes.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This function calculates state and federal income taxes using the TAXSIM 32 tax simulator.
See <a href="https://users.nber.org/~taxsim/taxsim32/" class="external-link">https://users.nber.org/~taxsim/taxsim32/</a> for more information on TAXSIM 32.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="fu">taxsim_calculate_taxes</span><span class="op">(</span>
  <span class="va">.data</span>,
  return_all_information <span class="op">=</span> <span class="cn">FALSE</span>,
  upload_method <span class="op">=</span> <span class="st">"ftp"</span>
<span class="op">)</span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>.data</dt>
<dd><p>Data frame containing the information that will be used to calculate taxes.
This data set will be sent to TAXSIM. Data frame must have specified column names and data types.</p></dd>
<dt>return_all_information</dt>
<dd><p>Boolean (TRUE or FALSE). Whether to return all information from TAXSIM (TRUE),
or only key information (FALSE). Returning all information returns 42 columns of output, while only
returning key information returns 9 columns. It is faster to download results with only key information.</p></dd>
<dt>upload_method</dt>
<dd><p>Either 'ftp' or 'ssh', can also use upper case. Defaults to 'ftp'. Determines whether ftp or ssh will be used to send data
to TAXSIM and retrieve the results. SSH is faster, so use it when there are over 100,000 records.
SSH is available in Windows 10 since autumn of 2019.</p></dd>
</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>Returns a data frame with the following columns:
<code>id_number</code> The unique id number for the row that corresponds to the id number in <code>.data</code><code>federal_taxes</code> Total federal taxes due. Corresponds to <code>fiitax</code> in TAXSIM.
<code>state_taxes</code> Total state taxes due; if state taxes were calculated.
Corresponds to <code>siitax</code> in TAXSIM.
<code>fica_taxes</code> Total FICA taxes due. This includes both the employee and company share.
Corresponds to <code>fica</code> in TAXSIM.
<code>federal_marginal_rate</code> Federal marginal tax rate of taxpayer. Corresponds to <code>frate</code> in TAXSIM.
<code>state_marginal_rate</code> State marginal tax rate of taxpayer. Corresponds to <code>srate</code> in TAXSIM.
<code>fica_rate</code> FICA rate. Corresponds to <code>ficar</code> in TAXSIM.</p>
    </div>
    <div class="section level2">
    <h2 id="required-columns">Required columns<a class="anchor" aria-label="anchor" href="#required-columns"></a></h2>
    


<p><code>id_number</code> An arbitrary, non-negative, whole number. Each number must be unique.
This number links the results from TAXSIM 32 to the original data frame with entries.</p>
<p><code>tax_year</code> Tax year ending Dec 31 (4 digits between 1960 and 2023). State must be zero if
year is before 1977 or after 2023.</p>
<p><code>filing_status</code> Filing status of tax unit. One of the following: "single" for single;
"married, jointly" for married, filing jointly; "married, separately" for married, filing separately;
"dependent child" for dependent, usually a child with income; or "head of household" for head of household filing status.</p>
    </div>
    <div class="section level2">
    <h2 id="optional-columns">Optional columns<a class="anchor" aria-label="anchor" href="#optional-columns"></a></h2>
    


<p><code>state</code> State two letter abbreviation or state SOI code. If state income taxes are not needed,
either label as "No State" or remove this variable. State income tax information is only available from 1977 to 2023.</p>
<p><code>primary_age</code> Age of primary taxpayer as of December 31st of tax year. Taxpayer age variables
determine eligibility for additional standard deductions, personal exemption, EITC and AMT exclusion.</p>
<p><code>spouse_age</code> Age of spouse as of December 31st of tax year.</p>
<p><code>num_dependents</code> Total number of dependents.</p>
<p><code>num_dependents_thirteen</code> Number of children under 13 with eligible child care expenses (Dependent Care Credit).</p>
<p><code>num_dependents_seventeen</code> Number of children under 17 for the entire tax year (Child Credit).
This includes children under 13.</p>
<p><code>num_dependents_eitc</code> Number of qualifying children for EITC. (Typically younger than 19 or
younger than 24 and a full-time student).</p>
<p><code>primary_wages</code> Wage and salary income of Primary Taxpayer (include self-employment but no QBI).</p>
<p><code>spouse_wages</code> Wage and salary income of Spouse (include self-employment but no QBI). Must
be zero or the column should not exist for non-joint returns.</p>
<p><code>dividends</code> Dividend income (qualified dividends only for 2003 on).</p>
<p><code>interest</code> Interest income received (+/-).</p>
<p><code>short_term_capital_gains</code> Short Term Capital Gains or losses (+/-).</p>
<p><code>long_term_capital_gains</code> Long Term Capital Gains or losses (+/-).</p>
<p><code>other_property_income</code> Other property income subject to NIIT, including: unearned or limited
partnership and passive S-Corp profits; rent not eligible for QBI deduction; non-qualified
dividends; capital gains distributions on form 1040; and other income or loss not otherwise enumerated here.</p>
<p><code>other_non_property_income</code> Other non-property income not subject to Medicare NIIT such as:
alimony; nonwage fellowships; and state income tax refunds (itemizers only). Also includes
adjustments and items such as: alimony paid; Keogh and IRA contributions; foreign income exclusion; and NOLs</p>
<p><code>pensions</code> Taxable Pensions and IRA distributions.</p>
<p><code>social_security</code> Gross Social Security Benefits.</p>
<p><code>unemployment</code> Unemployment compensation received.</p>
<p><code>other_transfer_income</code> Other non-taxable transfer income such as: welfare; workers comp;
veterans benefits; and child support that would affect eligibility for state property tax
rebates but would not be taxable at the federal level.</p>
<p><code>rent_paid</code> Rent paid (used only for calculating state property tax rebates).</p>
<p><code>property_taxes</code> Real Estate taxes paid. This is a preference for the AMT and is is also
used to calculate state property tax rebates.</p>
<p><code>other_itemized_deductions</code> Other Itemized deductions that are a preference for the Alternative
Minimum Tax. These would include: Other state and local taxes (line 8 of Schedule A) plus
local income tax; Preference share of medical expenses; Miscellaneous (line 27).</p>
<p><code>child_care_expenses</code> Child care expenses.</p>
<p><code>misc_deductions</code> Deductions not included in <code>other_itemized_deductions</code> and not a preference
for the AMT, including (on Schedule A for 2009). Might include: Deductible medical expenses
not included in Line 16; Motor Vehicle Taxes paid; Home mortgage interest; Charitable contributions;
and Casulty or Theft Losses.</p>
<p><code>scorp_income</code> Active S-Corp income (is SSTB).</p>
<p><code>qualified_business_income</code> Primary Taxpayer's Qualified Business Income (QBI) subject to a
preferential rate without phaseout and assuming sufficient wages paid or capital to be eligible
for the full deduction. Subject to SECA and Medicare additional Earnings Tax.</p>
<p><code>specialized_service_trade</code> Primary Taxpayer's Specialized Service Trade or Business service
(SSTB) with a preferential rate subject to claw-back. Subject to SECA and Medicare Additional Earnings Tax.</p>
<p><code>spouse_qualified_business_income</code> Spouse's QBI. Must be zero for non-joint returns, or the
column should not exist.</p>
<p><code>spouse_specialized_service_trade</code> Spouse's SSTB. Must be zero for non-joint returns, or the
column should not exist.</p>
    </div>
    <div class="section level2">
    <h2 id="note-on-number-of-dependents">Note on number of dependents<a class="anchor" aria-label="anchor" href="#note-on-number-of-dependents"></a></h2>
    


<p><code>num_dependents</code> columns are not mutually exclusive. For example, a family with a 13 year old
can report the dependent in <code>num_dependents_thirteen</code> and also in <code>num_dependents_seventeen</code>.</p>
    </div>
    <div class="section level2">
    <h2 id="additional-output">Additional Output<a class="anchor" aria-label="anchor" href="#additional-output"></a></h2>
    <p>NA</p>
    </div>
    <div class="section level2">
    <h2 id="giving-credit-where-it-is-due">Giving credit where it is due<a class="anchor" aria-label="anchor" href="#giving-credit-where-it-is-due"></a></h2>
    


<p>The NBER's <a href="http://users.nber.org/~taxsim/taxsim32/" class="external-link">TAXSIM 32</a> tax simulator does all tax
calculations. This package simply lets users interact with the tax simulator through R. Therefore,
users should cite the TAXSIM 32 tax simulator when they use this package in their work:</p>
<p>Feenberg, Daniel Richard, and Elizabeth Coutts, An Introduction to the TAXSIM Model,
Journal of Policy Analysis and Management vol 12 no 1, Winter 1993, pages 189-194.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"></span>
<span class="r-in"><span class="va">family_income</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span class="r-in">    id_number <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span><span class="op">)</span>,</span>
<span class="r-in">     state <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'North Carolina'</span>, <span class="st">'NY'</span><span class="op">)</span>,</span>
<span class="r-in">     tax_year <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2015</span>, <span class="fl">2015</span><span class="op">)</span>,</span>
<span class="r-in">     filing_status <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'single'</span>, <span class="st">'married, jointly'</span><span class="op">)</span>,</span>
<span class="r-in">     primary_wages <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">10000</span>, <span class="fl">100000</span><span class="op">)</span>,</span>
<span class="r-in">     primary_age <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">26</span>, <span class="fl">36</span><span class="op">)</span></span>
<span class="r-in"><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="va">family_taxes</span> <span class="op">&lt;-</span> <span class="fu">taxsim_calculate_taxes</span><span class="op">(</span><span class="va">family_income</span>, upload_method <span class="op">=</span> <span class="st">'ftp'</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "All required columns are present and the data is in the proper format!"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "Uploading data to TAXSIM server via ftp."</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "Downloading data from TAXSIM server via ftp."</span>
<span class="r-in"></span>
<span class="r-in"><span class="fu"><a href="https://rdrr.io/r/base/merge.html" class="external-link">merge</a></span><span class="op">(</span><span class="va">family_income</span>, <span class="va">family_taxes</span>, by <span class="op">=</span> <span class="st">'id_number'</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   id_number          state tax_year    filing_status primary_wages primary_age</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1         1 North Carolina     2015           single         1e+04          26</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2         2             NY     2015 married, jointly         1e+05          36</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   federal_taxes state_taxes fica_taxes federal_marginal_rate</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1       -369.12      143.75       1530                  7.65</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2      11437.50     4761.98      15300                 25.00</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   state_marginal_rate fica_rate</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1                5.75        15</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2                6.45        15</span>
<span class="r-in"></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by <a href="https://shaneorr.io" class="external-link">Shane Orr</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.1.</p>
</div>

    </footer></div>

  

  

  </body></html>

